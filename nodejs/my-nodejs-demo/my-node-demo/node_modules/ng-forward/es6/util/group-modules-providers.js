import { providerStore } from '../writers';
import { flatten } from './helpers';
import { Provider } from './../classes/provider';
const STRING_TEST = (a) => typeof a === 'string';
const PROVIDER_TEST = (a) => (typeof a === 'function' || a instanceof Provider) && providerStore.has('name', a);
export default function groupModulesAndProviders(modulesAndProviders, errorContext = `while analyzing providers`) {
    modulesAndProviders = flatten(modulesAndProviders);
    let modules = modulesAndProviders.filter(STRING_TEST);
    let providers = modulesAndProviders.filter(PROVIDER_TEST);
    let invalid = modulesAndProviders.filter(a => !STRING_TEST(a)).filter(a => !PROVIDER_TEST(a));
    if (invalid.length > 0) {
        throw new TypeError(`TypeError ${errorContext}.
    Invalid Providers: please make sure all providers are an Injectable(), Component(), Directive(), a Provider, or a module string.
    Here's the invalid values: ${invalid.join(', ')}`);
    }
    return { modules, providers };
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi91dGlsL2dyb3VwLW1vZHVsZXMtcHJvdmlkZXJzLnRzIl0sIm5hbWVzIjpbImdyb3VwTW9kdWxlc0FuZFByb3ZpZGVycyJdLCJtYXBwaW5ncyI6Ik9BQU8sRUFBQyxhQUFhLEVBQUMsTUFBTSxZQUFZO09BQ2pDLEVBQUMsT0FBTyxFQUFDLE1BQU0sV0FBVztPQUMxQixFQUFDLFFBQVEsRUFBQyxNQUFNLHVCQUF1QjtBQUU5QyxNQUFNLFdBQVcsR0FBRyxDQUFDLENBQU0sS0FBSyxPQUFPLENBQUMsS0FBSyxRQUFRLENBQUM7QUFDdEQsTUFBTSxhQUFhLEdBQUcsQ0FBQyxDQUFNLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxVQUFVLElBQUksQ0FBQyxZQUFZLFFBQVEsQ0FBQyxJQUFJLGFBQWEsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBRXJILGlEQUFpRCxtQkFBMEIsRUFBRSxZQUFZLEdBQVcsMkJBQTJCO0lBRTdIQSxtQkFBbUJBLEdBQUdBLE9BQU9BLENBQUNBLG1CQUFtQkEsQ0FBQ0EsQ0FBQ0E7SUFHbkRBLElBQUlBLE9BQU9BLEdBQUdBLG1CQUFtQkEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsQ0FBQ0E7SUFFdERBLElBQUlBLFNBQVNBLEdBQUdBLG1CQUFtQkEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsYUFBYUEsQ0FBQ0EsQ0FBQ0E7SUFFMURBLElBQUlBLE9BQU9BLEdBQUdBLG1CQUFtQkEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsYUFBYUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7SUFFOUZBLEVBQUVBLENBQUNBLENBQUNBLE9BQU9BLENBQUNBLE1BQU1BLEdBQUdBLENBQUNBLENBQUNBLENBQUFBLENBQUNBO1FBQ3RCQSxNQUFNQSxJQUFJQSxTQUFTQSxDQUFDQSxhQUFhQSxZQUFZQTs7aUNBRWhCQSxPQUFPQSxDQUFDQSxJQUFJQSxDQUFDQSxJQUFJQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQTtJQUNyREEsQ0FBQ0E7SUFFREEsTUFBTUEsQ0FBQ0EsRUFBRUEsT0FBT0EsRUFBRUEsU0FBU0EsRUFBRUEsQ0FBQ0E7QUFDaENBLENBQUNBIiwiZmlsZSI6ImxpYi91dGlsL2dyb3VwLW1vZHVsZXMtcHJvdmlkZXJzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtwcm92aWRlclN0b3JlfSBmcm9tICcuLi93cml0ZXJzJztcbmltcG9ydCB7ZmxhdHRlbn0gZnJvbSAnLi9oZWxwZXJzJztcbmltcG9ydCB7UHJvdmlkZXJ9IGZyb20gJy4vLi4vY2xhc3Nlcy9wcm92aWRlcic7XG5cbmNvbnN0IFNUUklOR19URVNUID0gKGE6IGFueSkgPT4gdHlwZW9mIGEgPT09ICdzdHJpbmcnO1xuY29uc3QgUFJPVklERVJfVEVTVCA9IChhOiBhbnkpID0+ICh0eXBlb2YgYSA9PT0gJ2Z1bmN0aW9uJyB8fCBhIGluc3RhbmNlb2YgUHJvdmlkZXIpICYmIHByb3ZpZGVyU3RvcmUuaGFzKCduYW1lJywgYSk7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdyb3VwTW9kdWxlc0FuZFByb3ZpZGVycyhtb2R1bGVzQW5kUHJvdmlkZXJzOiBhbnlbXSwgZXJyb3JDb250ZXh0OiBzdHJpbmcgPSBgd2hpbGUgYW5hbHl6aW5nIHByb3ZpZGVyc2ApXG4gICAgOiB7IG1vZHVsZXM6IGFueVtdLCBwcm92aWRlcnM6IGFueVtdIH0ge1xuICBtb2R1bGVzQW5kUHJvdmlkZXJzID0gZmxhdHRlbihtb2R1bGVzQW5kUHJvdmlkZXJzKTtcblxuICAvLyBmaW5kIGFsbCBtb2R1bGVzXG4gIGxldCBtb2R1bGVzID0gbW9kdWxlc0FuZFByb3ZpZGVycy5maWx0ZXIoU1RSSU5HX1RFU1QpO1xuICAvLyBmaW5kIGFsbCBhbm5vdGF0ZWQgY2xhc3NlcyBhbmQgUHJvdmlkZXJzXG4gIGxldCBwcm92aWRlcnMgPSBtb2R1bGVzQW5kUHJvdmlkZXJzLmZpbHRlcihQUk9WSURFUl9URVNUKTtcblxuICBsZXQgaW52YWxpZCA9IG1vZHVsZXNBbmRQcm92aWRlcnMuZmlsdGVyKGEgPT4gIVNUUklOR19URVNUKGEpKS5maWx0ZXIoYSA9PiAhUFJPVklERVJfVEVTVChhKSk7XG5cbiAgaWYgKGludmFsaWQubGVuZ3RoID4gMCl7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgVHlwZUVycm9yICR7ZXJyb3JDb250ZXh0fS5cbiAgICBJbnZhbGlkIFByb3ZpZGVyczogcGxlYXNlIG1ha2Ugc3VyZSBhbGwgcHJvdmlkZXJzIGFyZSBhbiBJbmplY3RhYmxlKCksIENvbXBvbmVudCgpLCBEaXJlY3RpdmUoKSwgYSBQcm92aWRlciwgb3IgYSBtb2R1bGUgc3RyaW5nLlxuICAgIEhlcmUncyB0aGUgaW52YWxpZCB2YWx1ZXM6ICR7aW52YWxpZC5qb2luKCcsICcpfWApO1xuICB9XG5cbiAgcmV0dXJuIHsgbW9kdWxlcywgcHJvdmlkZXJzIH07XG59XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
