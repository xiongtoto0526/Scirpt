import EventEmitter from '../events/event-emitter';
import CustomEvent from '../util/custom-event';
export default function (instance, element, $scope, outputs) {
    let subscriptions = [];
    const create = (eventKey, emitter) => {
        return emitter.subscribe((data) => {
            let event = new CustomEvent(eventKey, { detail: data, bubbles: false });
            element[0].dispatchEvent(event);
        });
    };
    for (let key in outputs) {
        if (instance[key] && instance[key] instanceof EventEmitter) {
            subscriptions.push(create(outputs[key], instance[key]));
        }
    }
    $scope.$on('$destroy', (event) => {
        subscriptions.forEach(subscription => subscription.unsubscribe());
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9wcm9wZXJ0aWVzL291dHB1dHMtYnVpbGRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiT0FNTyxZQUFZLE1BQU0seUJBQXlCO09BRTNDLFdBQVcsTUFBTSxzQkFBc0I7QUFNOUMseUJBQXdCLFFBQWEsRUFBRSxPQUF5QixFQUFFLE1BQWlCLEVBQUUsT0FBWTtJQUUvRixJQUFJLGFBQWEsR0FBVSxFQUFFLENBQUM7SUFJOUIsTUFBTSxNQUFNLEdBQUcsQ0FBQyxRQUFnQixFQUFFLE9BQXFCO1FBQ3JELE1BQU0sQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBUztZQUNqQyxJQUFJLEtBQUssR0FBRyxJQUFJLFdBQVcsQ0FBQyxRQUFRLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO1lBQ3hFLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbEMsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUM7SUFJRixHQUFHLENBQUEsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLE9BQU8sQ0FBQyxDQUFBLENBQUM7UUFDdEIsRUFBRSxDQUFBLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLFFBQVEsQ0FBQyxHQUFHLENBQUMsWUFBWSxZQUFZLENBQUMsQ0FBQSxDQUFDO1lBQ3pELGFBQWEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRSxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzFELENBQUM7SUFDSCxDQUFDO0lBR0QsTUFBTSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxLQUF1QjtRQUM3QyxhQUFhLENBQUMsT0FBTyxDQUFDLFlBQVksSUFBSSxZQUFZLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQztJQUNwRSxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMiLCJmaWxlIjoibGliL3Byb3BlcnRpZXMvb3V0cHV0cy1idWlsZGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gIyBPdXRwdXRzIEJ1aWxkZXJcbi8vIFRha2VzIGFuIGluc3RhbmNlIG9mIGEgY29udHJvbGxlciBhbmQgZGV0ZWN0cyBldmVudCBlbWl0dGVycy4gU3Vic2NyaWJlc1xuLy8gdG8gdGhlIGVtaXR0ZXJzIHRvIG1ha2UgZXZlbnQgZGlzcGF0Y2hpbmcgYSBicmVlemUuXG4vL1xuLy8gIyMgU2V0dXBcbi8vIEltcG9ydCB0aGUgRXZlbnRFbWl0dGVyIGNsYXNzXG5pbXBvcnQgRXZlbnRFbWl0dGVyIGZyb20gJy4uL2V2ZW50cy9ldmVudC1lbWl0dGVyJztcbmltcG9ydCB7SU5nRm9yd2FyZEpRdWVyeX0gZnJvbSBcIi4uL3V0aWwvanFsaXRlLWV4dGVuc2lvbnNcIjtcbmltcG9ydCBDdXN0b21FdmVudCBmcm9tICcuLi91dGlsL2N1c3RvbS1ldmVudCc7XG5cbi8vICMjIEZ1bmN0aW9uXG4vLyBUYWtlcyBhbiBpbnN0YW5jZSBvZiB0aGUgY29udHJvbGxlciwgZWxlbWVudCBvZiB0aGUgY29tcG9uZW50IGZvciBkaXNwYXRjaGluZ1xuLy8gdGhlIG91dHB1dCwgJHNjb3BlIGZvciBkaXNwb3Npbmcgb2Ygc3Vic2NyaXB0aW9ucywgYW5kIGEgbWFwIG9mIHRoZSBlbWl0dGVycyBhbmRcbi8vIG91dHB1dHMgdGhhdCBtaWdodCBiZSBvbiB0aGUgaW5zdGFuY2VcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGluc3RhbmNlOiBhbnksIGVsZW1lbnQ6IElOZ0ZvcndhcmRKUXVlcnksICRzY29wZTogbmcuSVNjb3BlLCBvdXRwdXRzOiBhbnkpe1xuICAvLyBDb2xsZWN0aW9uIG9mIHN1YnNjcmlwdGlvbnMgd2UnbGwgZ2VuZXJhdGVcbiAgbGV0IHN1YnNjcmlwdGlvbnM6IGFueVtdID0gW107XG5cbiAgLy8gQ3JlYXRlIGEgc3Vic2NyaXB0aW9uIHRvIHRoZSBldmVudCBlbWl0dGVyLiBXaGVuIHdlIG9ic2VydmUgYSBuZXcgdmFsdWUsXG4gIC8vIGRpc3BhdGNoIGEgYnViYmxpbmcgZXZlbnQgb250byB0aGUgZWxlbWVudFxuICBjb25zdCBjcmVhdGUgPSAoZXZlbnRLZXk6IHN0cmluZywgZW1pdHRlcjogRXZlbnRFbWl0dGVyKSA9PiB7XG4gICAgcmV0dXJuIGVtaXR0ZXIuc3Vic2NyaWJlKChkYXRhOiBhbnkpID0+IHtcbiAgICAgIGxldCBldmVudCA9IG5ldyBDdXN0b21FdmVudChldmVudEtleSwgeyBkZXRhaWw6IGRhdGEsIGJ1YmJsZXM6IGZhbHNlIH0pO1xuICAgICAgZWxlbWVudFswXS5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBJdGVyYXRlIG92ZXIgdGhlIGVtbWl0dGVyS2V5cyB0byBkZXRlY3QgaWYgdGhlIGNvbnRyb2xsZXIgY3JlYXRlZCBhbnlcbiAgLy8gRXZlbnRFbWl0dGVycy4gSWYgaXQgZGlkLCBzdWJzY3JpYmUgdG8gdGhlIGVtaXR0ZXIgdG8gZGlzcGF0Y2ggdGhlIG91dHB1dHMuXG4gIGZvcihsZXQga2V5IGluIG91dHB1dHMpe1xuICAgIGlmKGluc3RhbmNlW2tleV0gJiYgaW5zdGFuY2Vba2V5XSBpbnN0YW5jZW9mIEV2ZW50RW1pdHRlcil7XG4gICAgICBzdWJzY3JpcHRpb25zLnB1c2goY3JlYXRlKG91dHB1dHNba2V5XSwgaW5zdGFuY2Vba2V5XSkpO1xuICAgIH1cbiAgfVxuXG4gIC8vIE9uY2UgdGhlIGNvbXBvbmVudCdzIHNjb3BlIGhhcyBiZWVuIGRlc3Ryb3llZCwgdGVhciBkb3duIHRoZSBzdWJzY3JpcHRpb25zLlxuICAkc2NvcGUuJG9uKCckZGVzdHJveScsIChldmVudDogbmcuSUFuZ3VsYXJFdmVudCkgPT4ge1xuICAgIHN1YnNjcmlwdGlvbnMuZm9yRWFjaChzdWJzY3JpcHRpb24gPT4gc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCkpO1xuICB9KTtcbn1cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
