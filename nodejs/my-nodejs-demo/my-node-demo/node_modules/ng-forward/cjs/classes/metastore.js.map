{"version":3,"sources":["/source/classes/lib/classes/metastore.ts"],"names":["Metastore","Metastore.constructor","Metastore._map","Metastore.get","Metastore.set","Metastore.has","Metastore.push","Metastore.merge","Metastore.forEach"],"mappings":"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","file":"classes/metastore.js","sourcesContent":["export default class Metastore{\n\tconstructor(private namespace:string){\n\t\t\n\t}\n\t\n\tprivate _map(obj: any, key?: string): Map<any,any>{\n\t\tif(!Reflect.hasOwnMetadata(this.namespace, obj, key)){\n\t\t\tReflect.defineMetadata(this.namespace, new Map(), obj, key);\n\t\t}\n\t\t\n\t\treturn Reflect.getOwnMetadata(this.namespace, obj, key);\n\t}\n\t\n\tget(key: any, obj: any, prop?: string): any{\n\t\treturn this._map(obj, prop).get(key);\n\t}\n\t\n\tset(key: any, value: any, obj: any, prop?: string){\n\t\tthis._map(obj, prop).set(key, value);\n\t}\n\t\n\thas(key: any, obj: any, prop?: string): boolean{\n\t\treturn this._map(obj, prop).has(key);\n\t}\n\t\n\tpush(key: any, value: any, obj: any, prop?: string){\n\t\tif(!this.has(key, obj, prop)){\n\t\t\tthis.set(key, [], obj, prop);\n\t\t}\n\t\t\n\t\tlet store = this.get(key, obj, prop);\n\t\t\n\t\tif(!Array.isArray(store)){\n\t\t\tthrow new Error('Metastores can only push metadata to array values');\n\t\t}\n\t\t\n\t\tstore.push(value);\n\t}\n\n\tmerge(key: any, value: any, obj: any, prop?: string) {\n\t\tlet previous = this.get(key, obj, prop) || {};\n\t\tlet mergedObj = Object.assign({}, previous, value);\n        this.set(key, mergedObj, obj, prop);\n\t}\n\t\n\tforEach(callbackFn: (value: any, index: any, map: Map<any, any>) => void, obj: any, prop?: string){\n\t\tthis._map(obj, prop).forEach(callbackFn);\n\t}\n}"],"sourceRoot":"/source/"}