{"version":3,"sources":["/source/testing/lib/testing/providers.ts"],"names":["workFn","isSpecRunning"],"mappings":";;;;;;;;+BAAwB,qBAAqB;;AAO7C,IAAI,UAAU,GAAG,EAAE,CAAC;AAcpB,IAAa,SAAS,GAAG,SAAZ,SAAS,CAAI,SAAS,EAAA;AACjC,WAAO,aAAa,EAAE,GAAG,MAAM,EAAE,GAAG,MAAM,CAAC;AAC3C,aAAA,MAAA,GAAA;;;AACEA,uBAAAA,UAAUA,EAACA,IAAIA,MAAAA,iCAAIA,SAASA,0BAASA,EAACA,CAACA;KACxCA;CACF,CAAC;;AAEF,IAAa,YAAY,GAAG,SAAf,YAAY,GAAG;AAC1B,WAAO,UAAU,CAAC;CACnB,CAAC;;AAEF,IAAa,cAAc,GAAG,SAAjB,cAAc,GAAG;AAC5B,cAAU,GAAG,EAAE,CAAC;CACjB,CAAC;;AAIF,IAAI,WAAW,GAAG,IAAI,CAAC;AACvB,SAAA,aAAA,GAAA;AACEC,WAAOA,CAACA,CAACA,WAAWA,CAACA;CACtBA;AAED,IAAI,MAAM,CAAC,OAAO,IAAI,MAAM,CAAC,KAAK,EAAE;AAElC,KAAC,MAAM,CAAC,UAAU,IAAI,MAAM,CAAC,KAAK,CAAA,CAAE,YAAA;AAClC,mBAAW,GAAG,IAAI,CAAC;KACpB,CAAC,CAAC;AAEH,KAAC,MAAM,CAAC,SAAS,IAAI,MAAM,CAAC,QAAQ,CAAA,CAAE,YAAA;AACpC,mBAAW,GAAG,IAAI,CAAC;KACpB,CAAC,CAAC;CACJ","file":"testing/providers.js","sourcesContent":["import { provide } from '../classes/provider';\n\n/**\n * Stores references to all bindings. Is cleared by TestComponentBuilder after a create call.\n * @type {Array}\n * @private\n */\nlet _providers = [];\n\n/**\n * A sugar function for use in a beforeEach block. It's passed the bind method for\n * creating bindings. Can use in one of two ways:\n *\n * beforeEach(bindings(bind => {}));\n * or\n * beforeEach(() => {\n *   bindings(bind => {});\n * })\n * @param provideFn(provide):[Provider]\n * @returns {workFn}\n */\nexport const providers = (provideFn) => {\n  return isSpecRunning() ? workFn() : workFn;\n  function workFn() {\n    _providers.push(...provideFn(provide));\n  }\n};\n\nexport const allProviders = () => {\n  return _providers;\n};\n\nexport const clearProviders = () => {\n  _providers = [];\n};\n\n\n// helpers for mocha and jasmine beforeEach\nvar currentSpec = null;\nfunction isSpecRunning() {\n  return !!currentSpec;\n}\n//noinspection TypeScriptUnresolvedVariable\nif (window.jasmine || window.mocha) {\n  //noinspection TypeScriptUnresolvedVariable\n  (window.beforeEach || window.setup)(function () {\n    currentSpec = this;\n  });\n  //noinspection TypeScriptUnresolvedVariable\n  (window.afterEach || window.teardown)(function () {\n    currentSpec = null;\n  });\n}"],"sourceRoot":"/source/"}